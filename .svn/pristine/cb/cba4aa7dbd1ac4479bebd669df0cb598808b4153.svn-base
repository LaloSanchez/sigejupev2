var juzgadoSesion=$("#hiddenCveAdscripcion").val();var cveUsuarioSesion=$("#hiddenCveUsuarioSistema").val();var cvePerfilSesion=$("#hiddenCvePerfil").val();var procedencia=$("#hiddenProcedencia").val();var createRecord="N";var readRecord="N";var updateRecord="N";var deleteRecord="N";F_SC_0001=function(){var strDatos="accion=consultar";$.ajax({type:"POST",url:"../fachadas/sigejupe/tiposnotificaciones/TiposnotificacionesFacade.Class.php",data:strDatos,async:true,dataType:"html",success:function(datos){var json="";json=eval("("+datos+")");if(json.totalCount>0){for(var i=0;i<json.totalCount;i++){$("#cmbNotificacion").append($("<option></option>").val(json.data[i].cveTipoNotificacion).html(json.data[i].desTipoNotificacion))}}},error:function(objeto,quepaso,otroobj){$("#divAlertDager").html("Error en la peticion:\n\n"+quepaso);$("#divAlertDager").show("slide");setTimeAlert("divAlertDager")}})};F_SC_0002=function(pag,cantReg){var cveJuzgadoBusqueda=$("#cmbJuzgados").val();var cveTipoCarpeta=$("#hiddenCveTipoCarpeta").val();var strDatos="accion=getPaginas";var b=0;if($("#txtNumero").val()!=""||$("#txtAnio").val()!=""||$("#cmbTipoCarpeta").val()!="0"||$("#cmbNotificacion").val()!="0"){b=1}if(b==0){strDatos+="&txtFecInicialBusqueda="+$("#txtfechaInicial").val();strDatos+="&txtFecFinalBusqueda="+$("#txtfechaFinal").val()}strDatos+="&numero="+$("#txtNumero").val();strDatos+="&anio="+$("#txtAnio").val();strDatos+="&cveTipoCarpeta="+cveTipoCarpeta;strDatos+="&cveJuzgado="+cveJuzgadoBusqueda;strDatos+="&cveTipoNotificacion="+$("#cmbNotificacion").val();strDatos+="&cveTipoActuacion=24";strDatos+="&cantxPag="+cantReg;strDatos+="&activo=S";$.ajax({type:"POST",url:"../fachadas/sigejupe/actuaciones/ActuacionesFacade.Class.php",data:strDatos,async:true,dataType:"html",success:function(datos){var json="";json=eval("("+datos+")");if(json.totalCount>0){$("#cmbPaginacion").find("option").remove().end();for(var i=0;i<(parseInt(json.total));i++){$("#cmbPaginacion").append($("<option></option>").val(json.data[i].pagina).html(json.data[i].pagina))}$("#totalReg").html("<b> Total: "+json.totalCount+"</b>");$("#cmbPaginacion").val(pag)}else{var tipoNumero=$("#cmbTipoCarpeta :selected").text();$("#divAlertDager").html("Error EL NUMERO DE "+tipoNumero+" NO EXISTE");$("#divAlertDager").show("slide");setTimeAlert("divAlertDager")}$("#barCarga").html("")},error:function(objeto,quepaso,otroobj){$("#divAlertDager").html("Error en la peticion:\n\n"+quepaso);$("#divAlertDager").show("slide");setTimeAlert("divAlertDager")}})};F_SC_0003=function(){$("#divConsulta").hide();$("#tableSearch").empty();var page=$("#cmbPaginacion").val();var cantReg=$("#cmbNumReg").val();var cveTipoActuacion=24;var tipoCarpeta=$("#cmbTipoCarpeta option:selected").val();tipoCarpeta=(tipoCarpeta!=0?tipoCarpeta:"");var numActuacion=$("#txtNumero").val();var anioActuacion=$("#txtAnio").val();var cveTipoNotificacion=($("#cmbNotificacion").val()!=0)?$("#cmbNotificacion").val():"";var fechaInicial="";var fechaFinal="";if(tipoCarpeta==""&&numActuacion==""&&anioActuacion==""){fechaInicial=$("#txtfechaInicial").val();fechaFinal=$("#txtfechaFinal").val()}var activo="S";var tableContent="";var tableDetail="";var cveJuzgadoBusqueda=$("#cmbJuzgados").val();var estatusJuzgado=false;var nombreImputado="";if(cveJuzgadoBusqueda>0){estatusJuzgado=true}if(estatusJuzgado){$("#inputConsultar, #inputLimpiar").prop("disabled",true);$("#inputConsultar").prop("value","Espere...");$.post("../fachadas/sigejupe/actuaciones/ActuacionesFacade.Class.php",{cveTipoCarpeta:tipoCarpeta,numero:numActuacion,anio:anioActuacion,cveJuzgado:cveJuzgadoBusqueda,cveTipoActuacion:cveTipoActuacion,cveTipoNotificacion:cveTipoNotificacion,txtFecInicialBusqueda:fechaInicial,txtFecFinalBusqueda:fechaFinal,activo:activo,pag:page,cantxPag:cantReg,accion:"buscarSuspensionCondicional"},function(response){var object=eval("("+response+")");var totalRecords=object.totalCount;if(totalRecords>0){F_SC_0009("Se encontraron coincidencias.","success");var data=object.data;tableContent+='<table id="tblResultados" class="table table-hover table-striped table-bordered">  <thead>      <tr>          <th>N&uacute;m.</th>          <th>Tipo</th>          <th>N&uacute;m. Suspensi&oacute;n Condicional / S&iacute;ntesis</th>          <th>Asignada</th>      </tr>  </thead>  <tbody id="">';$.each(data,function(k,v){var counter=parseInt(k)+1;var txtSintesis="";if(v.sintesis.length>50){txtSintesis=v.sintesis.substring(0,50)+"..."}else{txtSintesis=v.sintesis}tableDetail='<table style="width:100%"><thead><tr><th style="width:30%">Nombre</th><th style="width:70%">Suspensi&oacute;n Condicional</th></tr></thead><tbody>';var tablaMedidas="";var tablaFechas="";var tablaApelacion="";var imputadoTMP=0;var idImputado="";$.each(v.medidascautelares,function(MC_llave,MC_valor){$.each(v.imputados,function(IMP_llave,IMP_valor){if(MC_valor.idImputadoCarpeta==IMP_valor.idImputado){idImputado=IMP_valor.idImputado;nombreImputado=IMP_valor.nombreImputado}});if(imputadoTMP!=idImputado){if(imputadoTMP!=0){tablaMedidas+='<tr><td colspan="2"><hr/></td></tr>'}tablaMedidas+="<tr>";tablaMedidas+='<td valign="top" style="width:30%">'+nombreImputado+"</br></br><small>Fecha de Registro: "+v.fechaRegistro+"</small></td>";imputadoTMP=idImputado}else{tablaMedidas+="<tr>";tablaMedidas+='<td valign="top" style="width:30%">&nbsp;</td>'}var mensajeApelacion="";if(MC_valor.Apelada=="S"){var descSentido="Error en la obtenci&oacute;n del dato.";var descSala="Error en la obtenci&oacute;n del dato.";$.each(sentidos.data,function(sentidos_k,sentidos_v){if(MC_valor.autosapelados.cveSentido==sentidos_v.cveSentido){descSentido=sentidos_v.desSentido;return}});$.each(salas.data,function(salas_k,salas_v){if(MC_valor.autosapelados.cveSala==salas_v.idJuzgado){descSala=salas_v.desJuz}});mensajeApelacion='<span class="text-warning">Tiene apelaci&oacute;n</span><br><ul><li>Datos de la Apelaci&oacute;n<br/>Toca: '+MC_valor.autosapelados.numToca+" / "+MC_valor.autosapelados.numAnio+"<br>Sentido: "+descSentido+"<br>Sala: "+descSala+"</li></ul>"}else{mensajeApelacion='<span class="text-muted">No apelada</span>'}tablaMedidas+='<td style="width:70%">'+MC_valor.desMedidaCautelar+"</br><small>Periodo: "+MC_valor.fechaInicio+" - "+MC_valor.fechaTermina+"</small> | <small>"+mensajeApelacion+"</small></br></br></td></tr>"});tableDetail+=tablaMedidas+"</tbody></table>";tableContent+="<tr onclick=''><td>"+counter+"</td><td>"+v.descTipoCarpeta+" - "+v.numero+"/"+v.anio+"<br/><a href='#' onclick='F_SC_0012("+JSON.stringify(v)+")'>Ver Contenido</a></td><td>"+v.numActuacion+" / "+v.aniActuacion+"</br/>"+txtSintesis+"</td><td> "+tableDetail+"</td></tr>"});tableContent+="  </tbody></table>";$("#divConsulta").show();$("#tableSearch").html(tableContent);$("#tblResultados").DataTable({paging:false});F_SC_0002(page,cantReg)}else{F_SC_0009("No se encontraron resultados con los par&aacute;metro elegidos. Intente con otros.","warning")}$("#inputConsultar, #inputLimpiar").prop("disabled",false);$("#inputConsultar").prop("value","Consultar")})}else{if(!estatusJuzgado){alert("Necesita definir en que Juzgado se realizará la búsqueda.")}}};F_SC_0004=function(){$("#cmbTipoCarpeta").val(0);$("#cmbNotificacion").val(0);$("#txtNumero").val("");$("#txtAnio").val("");$("#txtNumOficio").val("");$("#divTableResult").val("");$("#divConsulta").hide();$("#divTableResult").html("");$("#txtfechaInicial").val($("#hiddenFechaActual").val());$("#txtfechaFinal").val($("#hiddenFechaActual").val())};F_SC_0005=function(){var a=cveUsuarioSesion;$.get("../archivos/"+a+".json",function(b){for(var c=0;c<b.perfiles[0].totPerfiles;c++){if(cvePerfilSesion==b.perfiles[0].perfil[c].cvePerfil){$.each(b.perfiles[0].perfil[c].permisos,function(f,e){if(e.nomFormulario=="CONSULTAS"){var d=e.hijos;$.each(d,function(i,g){if(g.nomFormulario=="SUSPENSION CONDICIONAL"){var h=g.permisoFormulario[0];createRecord=h.create;readRecord=h.read;deleteRecord=h.deletee;updateRecord=h.update}})}})}}if(createRecord!="S"){}if(readRecord!="S"){$("#inputConsultar").attr("onclick","").prop("disabled",true).prop("value","No tiene permiso de consultar")}if(updateRecord!="S"){}if(deleteRecord!="S"){}})};(function(b){b.fn.validaCampo=function(a){b(this).on({keypress:function(g){var k=g.which,j=g.keyCode,i=String.fromCharCode(k).toLowerCase(),h=a;(-1!=h.indexOf(i)||9==j||37!=k&&37==j||39==j&&39!=k||8==j||46==j&&46!=k)&&161!=k||g.preventDefault()}})}})(jQuery);F_SC_0006=function(){var strDatos="accion=consultar";$.ajax({type:"POST",url:"../fachadas/sigejupe/tiposcarpetas/TiposcarpetasFacade.Class.php",data:strDatos,async:false,dataType:"html",success:function(datos){var json="";json=eval("("+datos+")");if(json.totalCount>0){for(var i=0;i<json.totalCount;i++){if(json.data[i].cveTipoCarpeta!=8){$("#cmbTipoCarpeta").append($("<option></option>").val(json.data[i].cveTipoCarpeta).html(json.data[i].desTipoCarpeta));$("#cmbTipoCarpeta2").append($("<option></option>").val(json.data[i].cveTipoCarpeta).html(json.data[i].desTipoCarpeta))}}}$("#divCmbRelaciones").hide()},error:function(objeto,quepaso,otroobj){$("#divAlertDager").html("Error en la peticion:\n\n"+quepaso);$("#divAlertDager").show("slide");setTimeAlert("divAlertDager")}})};F_SC_0007=function(){var b="";var a=($("#hiddenCveAdscripcion").val()==10385)?"comision":"unico";var b=(a=="comision")?"accion=consultar&cveTipojuzgado=1":"accion=distrito&cveTipojuzgado=1";$.ajax({type:"POST",url:"../fachadas/sigejupe/juzgados/JuzgadosFacade.Class.php",data:b,async:false,dataType:"json",success:function(c){if(c.totalCount>0){$.each(c.data,function(d,e){if(e.cveTipojuzgado==1){var f="<option tipoJuzgado="+e.cveTipojuzgado+" value = "+e.cveJuzgado+">"+e.desJuzgado+"</option>";$("#cmbJuzgados, #cmbJuzgadosConsultas").append(f);$("#cmbJuzgados,#cmbJuzgadosConsultas").val("0");F_SC_0008()}})}else{$("#divAlertDager").html("Error en la peticion:\n\nSin resultados");$("#divAlertDager").show("slide");setTimeAlert("divAlertDager")}}})};F_SC_0008=function(){$("#cmbTipoCarpeta option").each(function(){$(this).hide()});var a=$("#cmbJuzgados").val();var b=$("#cmbJuzgados").find("option:selected").attr("tipojuzgado");$("#cmbTipoCarpeta option[value=0]").show();if(b==1){$("#cmbTipoCarpeta option[value=8]").show();$("#cmbTipoCarpeta option[value=2]").show();$("#cmbTipoCarpeta option[value=1]").show();$("#cmbTipoCarpeta option[value=7]").show()}else{if(b==3){$("#cmbTipoCarpeta option[value=8]").show();$("#cmbTipoCarpeta option[value=5]").show();$("#cmbTipoCarpeta option[value=7]").show()}else{if(b==2){$("#cmbTipoCarpeta option[value=8]").show();$("#cmbTipoCarpeta option[value=3]").show();$("#cmbTipoCarpeta option[value=7]").show()}else{if(b==4){$("#cmbTipoCarpeta option[value=8]").show();$("#cmbTipoCarpeta option[value=4]").show();$("#cmbTipoCarpeta option[value=7]").show()}else{}}}}$("#cmbTipoCarpeta").val(0)};F_SC_0009=function(e,d,g,a){var e=e||"";var h="";var g=g||"";var a=a||"";var f=0,c="",b="";switch(d){case"success":h="divCorrecto";c="glyphicon glyphicon-ok";b="green";break;case"warning":h="divAdvertencia";c="glyphicon glyphicon-remove";b="red";f=1;break;case"information":h="divInformacion";c="glyphicon glyphicon-remove";b="red";break;case"error":h="divError";c="glyphicon glyphicon-remove";b="red";break}if(g!=""){h+=g;if(d=="success"){$("#divInformacion"+g).hide()}if(d=="information"){$("#divCorrecto"+g).hide();$("#"+h).html(e);$("#"+h).hide().show("slide")}}else{if(a!=""){$("#"+a).hide().empty().show("slide").append('<span style="color:'+b+';" class="'+c+'" aria-hidden="true"></span> '+e);h=a}else{$("#"+h).html(e);$("#"+h).hide().show("slide")}}setTimeout(function(){$("#"+h).hide("slide")},5000);return};F_SC_0010=function(){$.post("../fachadas/sigejupe/sentidosresoluciones/SentidosresolucionesFacade.Class.php",{activo:"S",accion:"consultar"},function(response){var object=eval("("+response+")");if(object.totalCount>0){$.each(object.data,function(llave,valor){sentidos.data[llave]={cveSentido:valor.cveSentido,desSentido:valor.desSentido}})}else{alert("Error en la obtención del catálogo de Sentidos. Accese nuevamente al módulo")}})};F_SC_0011=function(){$("#divImgloading").show();$.post("../fachadas/sigejupe/actuaciones/ActuacionesFacade.Class.php",{accion:"getSalas"},function(response){var object=eval("("+response+")");var options='<option value="0">-- SELECCIONE --</option>';if(object.totalCount>0){$.each(object.data,function(llave,valor){salas.data[llave]={idJuzgado:valor.idJuzgado,desJuz:valor.desJuz}})}else{alert("Error en la obtención del catálogo de Salas. Accese nuevamente al módulo")}});return};F_SC_0012=function(a){$("#modDescTipoCarpeta").empty().append(a.descTipoCarpeta);$("#modNumero").empty().append(a.numero);$("#modAnio").empty().append(a.anio);$("#modSintesis").empty().append(a.sintesis);editor.setContent("",false);F_SC_0013(a.observaciones);$("#descripcion-modal").modal("show")};F_SC_0013=function(a){try{editor.ready(function(){setTimeout(function(){editor.setContent(a,true)},500)})}catch(b){alert(b)}};var findContent={regs:[]};var sentidos={data:[]};var salas={data:[]};$(function(){F_SC_0011();F_SC_0010();$("#txtNumero").validaCampo("0123456789");$("#txtAnio").validaCampo("0123456789");$("#txtfechaInicial").datepicker({dateFormat:"dd/mm/yy"});$("#txtfechaFinal").datepicker({dateFormat:"dd/mm/yy"});editor=UE.getEditor("input_scondicional_observaciones");editor.ready(function(){editor.setContent()});F_SC_0007();F_SC_0006();F_SC_0001();F_SC_0005();$("#txtfechaInicial, #txtfechaFinal").datepicker().on("changeDate",function(a){$(this).datepicker("hide")})});$(document).ready(function(){$("#divImgloading").hide()}); 